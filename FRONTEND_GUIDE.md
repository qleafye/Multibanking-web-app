# üìù –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –¥–ª—è Frontend-—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å FastAPI (v2)

–≠—Ç–æ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –æ–±—ä—è—Å–Ω—è–µ—Ç, –∫–∞–∫ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å —Å –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–º —Å–µ—Ä–≤–∏—Å–æ–º –Ω–∞ FastAPI, –∏—Å–ø–æ–ª—å–∑—É—è —Ä–µ–∂–∏–º—ã `free` –∏ `pro`.

---

## üéØ –û—Å–Ω–æ–≤–Ω–∞—è –∑–∞–¥–∞—á–∞

–í–∞—à–∞ –∑–∞–¥–∞—á–∞ ‚Äî –ø–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –æ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è—Ö –æ—Ç **Java-—Å–µ—Ä–≤–∏—Å–∞**, –∞ –∑–∞—Ç–µ–º –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∏—Ö –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –≤ **Python-—Å–µ—Ä–≤–∏—Å (FastAPI)**, —É–∫–∞–∑–∞–≤ –Ω—É–∂–Ω—ã–π —Ä–µ–∂–∏–º –∞–Ω–∞–ª–∏–∑–∞.

-   **`free` —Ä–µ–∂–∏–º:** –ü—Ä–æ—Å—Ç–æ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö –ø–æ–¥–ø–∏—Å–æ–∫.
-   **`pro` —Ä–µ–∂–∏–º (—Ç–µ—Å—Ç–æ–≤—ã–π):** –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø–æ–¥–ø–∏—Å–∫–∏, –∞ —Ç–∞–∫–∂–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –ø–æ —ç–∫–æ–Ω–æ–º–∏–∏ –∏ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ —Å–æ–≤–µ—Ç—ã.

## üåä –û–±—â–∏–π –ø—Ä–æ—Ü–µ—Å—Å (Workflow)

1.  **–®–∞–≥ 1: –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –æ—Ç Java-—Å–µ—Ä–≤–∏—Å–∞.**
    *   –§—Ä–æ–Ω—Ç–µ–Ω–¥ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç `GET` –∑–∞–ø—Ä–æ—Å –Ω–∞ —ç–Ω–¥–ø–æ–∏–Ω—Ç Java-—Å–µ—Ä–≤–∏—Å–∞: `http://localhost:8080/api/v1/transactions`.
    *   –í –æ—Ç–≤–µ—Ç –ø—Ä–∏—Ö–æ–¥–∏—Ç –º–∞—Å—Å–∏–≤ –æ–±—ä–µ–∫—Ç–æ–≤-—Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π.

2.  **–®–∞–≥ 2: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∏ –æ—Ç–ø—Ä–∞–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö –≤ FastAPI.**
    *   –ü–æ–ª—É—á–µ–Ω–Ω—ã–π –º–∞—Å—Å–∏–≤ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –Ω—É–∂–Ω–æ –æ–±–µ—Ä–Ω—É—Ç—å –≤ JSON-–æ–±—ä–µ–∫—Ç –∏ **–¥–æ–±–∞–≤–∏—Ç—å –ø–æ–ª–µ `mode`**.
    *   –≠—Ç–æ—Ç –æ–±—ä–µ–∫—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è `POST` –∑–∞–ø—Ä–æ—Å–æ–º –Ω–∞ —ç–Ω–¥–ø–æ–∏–Ω—Ç FastAPI: `http://127.0.0.1:8000/analyze`.

3.  **–®–∞–≥ 3: –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞.**
    *   FastAPI –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç JSON-–æ–±—ä–µ–∫—Ç —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ –∞–Ω–∞–ª–∏–∑–∞.
    *   –í–∞—à–∞ –∑–∞–¥–∞—á–∞ ‚Äî –∫—Ä–∞—Å–∏–≤–æ –∏ –ø–æ–Ω—è—Ç–Ω–æ –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å —ç—Ç—É –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ä–µ–∂–∏–º–∞.

---

## üõ†Ô∏è API –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞ (FastAPI)

### –≠–Ω–¥–ø–æ–∏–Ω—Ç: `POST /analyze`

-   **URL:** `http://127.0.0.1:8000/analyze`
-   **Method:** `POST`
-   **Headers:** `Content-Type: application/json`

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∑–∞–ø—Ä–æ—Å–∞ (Request Body)

–í—ã –¥–æ–ª–∂–Ω—ã –æ—Ç–ø—Ä–∞–≤–∏—Ç—å JSON-–æ–±—ä–µ–∫—Ç —Å–æ —Å–ª–µ–¥—É—é—â–∏–º —Å—Ç—Ä–æ–µ–Ω–∏–µ–º:

```json
{
  "transactions": [
    {
      "id": "string",
      "date": "string (YYYY-MM-DD)",
      "amount": "number",
      "currency": "string (–Ω–∞–ø—Ä–∏–º–µ—Ä, 'RUB')",
      "description": "string"
    }
  ],
  "mode": "string ('free' –∏–ª–∏ 'pro')"
}
```

-   `transactions`: **(–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π)** –º–∞—Å—Å–∏–≤ –æ–±—ä–µ–∫—Ç–æ–≤-—Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π.
-   `mode`: **(–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π)** —Ä–µ–∂–∏–º –∞–Ω–∞–ª–∏–∑–∞.
    -   `"free"` (–∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é, –µ—Å–ª–∏ –ø–æ–ª–µ –Ω–µ —É–∫–∞–∑–∞–Ω–æ) ‚Äî –±–∞–∑–æ–≤—ã–π –∞–Ω–∞–ª–∏–∑.
    -   `"pro"` ‚Äî —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π –∞–Ω–∞–ª–∏–∑ —Å —Å–æ–≤–µ—Ç–∞–º–∏ –∏ —Ä–∞—Å—á–µ—Ç–æ–º —ç–∫–æ–Ω–æ–º–∏–∏.

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ—Ç–≤–µ—Ç–∞ (Success Response)

**–î–ª—è `free` —Ä–µ–∂–∏–º–∞:**

```json
{
  "subscriptions": [
    {
      "name": "string (–Ω–∞–∑–≤–∞–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–∞)",
      "amount": "number (—Å—É–º–º–∞ —Å–ø–∏—Å–∞–Ω–∏—è)",
      "last_payment_date": "string (YYYY-MM-DD)"
    }
  ],
  "pro_version_suggestions": []
}
```
*–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ: `potential_savings` –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤–Ω—É—Ç—Ä–∏ –ø–æ–¥–ø–∏—Å–∫–∏, –∞ `pro_version_suggestions` ‚Äî –ø—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤.*

**–î–ª—è `pro` —Ä–µ–∂–∏–º–∞:**

```json
{
  "subscriptions": [
    {
      "name": "string (–Ω–∞–∑–≤–∞–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–∞)",
      "amount": "number (—Å—É–º–º–∞ —Å–ø–∏—Å–∞–Ω–∏—è)",
      "last_payment_date": "string (YYYY-MM-DD)",
      "potential_savings": {
        "service_name": "string (–Ω–∞–∑–≤–∞–Ω–∏–µ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã)",
        "saving_amount": "number (—Å–∫–æ–ª—å–∫–æ –º–æ–∂–Ω–æ —Å—ç–∫–æ–Ω–æ–º–∏—Ç—å)"
      }
    }
  ],
  "pro_version_suggestions": [
    {
      "service_name": "string (–Ω–∞–∑–≤–∞–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–∞)",
      "suggestion": "string (–ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –ø–æ Pro-–≤–µ—Ä—Å–∏–∏)"
    }
  ]
}
```
*–ó–¥–µ—Å—å –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç –≤—Å–µ –ø–æ–ª—è.*

---

##  –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤

**1. –ó–∞–ø—Ä–æ—Å –≤ `free` —Ä–µ–∂–∏–º–µ (–∏–ª–∏ –µ—Å–ª–∏ `mode` –Ω–µ —É–∫–∞–∑–∞–Ω):**

```json
// POST /analyze
{
  "transactions": [
    {
      "id": "a1b2-c3d4-e5f6",
      "date": "2025-10-20",
      "amount": 399.0,
      "currency": "RUB",
      "description": "Payment for Yandex.Plus subscription"
    }
  ]
}
```

**2. –ó–∞–ø—Ä–æ—Å –≤ `pro` —Ä–µ–∂–∏–º–µ:**

```json
// POST /analyze
{
  "transactions": [
    {
      "id": "a1b2-c3d4-e5f6",
      "date": "2025-10-20",
      "amount": 399.0,
      "currency": "RUB",
      "description": "Payment for Yandex.Plus subscription"
    }
  ],
  "mode": "pro"
}
```

---

## üö® –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

-   **–°—Ç–∞—Ç—É—Å `422 Unprocessable Entity`**:
    -   **–ü—Ä–∏—á–∏–Ω–∞:** –í—ã –æ—Ç–ø—Ä–∞–≤–∏–ª–∏ –¥–∞–Ω–Ω—ã–µ –≤ –Ω–µ–≤–µ—Ä–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `mode` —Å–æ–¥–µ—Ä–∂–∏—Ç –∑–Ω–∞—á–µ–Ω–∏–µ, –æ—Ç–ª–∏—á–Ω–æ–µ –æ—Ç `"free"` –∏–ª–∏ `"pro"`).
    -   **–ß—Ç–æ –¥–µ–ª–∞—Ç—å:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—É –≤–∞—à–µ–≥–æ JSON-–∑–∞–ø—Ä–æ—Å–∞. –í —Ç–µ–ª–µ –æ—Ç–≤–µ—Ç–∞ –±—É–¥–µ—Ç –ø–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –æ—à–∏–±–∫–∏.
-   **–°—Ç–∞—Ç—É—Å `500 Internal Server Error`**:
    -   **–ü—Ä–∏—á–∏–Ω–∞:** –ü—Ä–æ–∏–∑–æ—à–ª–∞ –Ω–µ–ø—Ä–µ–¥–≤–∏–¥–µ–Ω–Ω–∞—è –æ—à–∏–±–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ.
    -   **–ß—Ç–æ –¥–µ–ª–∞—Ç—å:** –°–æ–æ–±—â–∏—Ç—å –±—ç–∫–µ–Ω–¥-–∫–æ–º–∞–Ω–¥–µ.

–£–¥–∞—á–∏ –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ!